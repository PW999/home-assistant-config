###############################################################################
#   @author         :   Phillip (P_W999)
#   @date           :   04/2021
#   @package        :   Weather package
#   @description    :   Small weather related actions
#   @url            :   https://github.com/PW999/home-assistant-config/
###############################################################################

input_boolean:
  # Decouples weather from automation. Naming could be better though, "It's sunny" would've been easier.
  darkweather:
    name: It's not sunny
    icon: mdi:cloud

##############################################
# Weather (8000000012xxx)
##############################################
# NEXT_ID 4

automation:
  - id: '8000000012001'
    alias: Switches - Dark weather
    description: Turn on the darkweather switch if it's not sunny outside
    trigger:
    - entity_id: weather.pw_casa
      platform: state
    condition:
    - condition: template
      value_template: "{{ not (is_state('weather.pw_casa', 'sunny') ) }}"
    action:
    - service: input_boolean.turn_on
      data:
        entity_id: input_boolean.darkweather

  - id: '8000000012002'
    alias: Switches - Sunny weather
    description: Turn off the darkweather switch if it's sunny outside
    trigger:
    - entity_id: weather.pw_casa
      platform: state
    condition:
    - condition: template
      value_template: "{{ (is_state('weather.pw_casa', 'sunny') ) }}"
    action:
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.darkweather
